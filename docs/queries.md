# Аналітичні SQL-запити

## Запит 1: Топ-3 товарів у кожній категорії

### Бізнес-питання
Які товари приносять найбільший дохід у кожній категорії?

### SQL-запит
Запит реалізований у сервісі `topProductsByCategory()` та використовує:
- JOIN таблиць Order, OrderItem, Product та Category
- агрегацію доходу (SUM)
- window function `ROW_NUMBER()` для визначення рейтингу в межах категорії
- фільтрацію лише завершених замовлень (status = 'COMPLETED')

### Пояснення
Результатом є топ-3 товарів у кожній категорії, відсортовані за доходом.
Це дозволяє визначати найбільш прибуткові позиції каталогу.

---

## Запит 2: Customer Lifetime Value (LTV)

### Бізнес-питання
Які користувачі приносять найбільший загальний дохід магазину?

### SQL-запит
Запит реалізований у функції `customerLTV()` та включає:
- JOIN таблиць User та Order
- підрахунок кількості замовлень (COUNT)
- підрахунок загальних витрат (SUM)
- фільтрацію лише завершених замовлень (status = 'COMPLETED')
- сортування за сумою витрат у спадному порядку

### Пояснення
Результат використовується для оцінки цінності клієнтів та аналізу прибутковості.
